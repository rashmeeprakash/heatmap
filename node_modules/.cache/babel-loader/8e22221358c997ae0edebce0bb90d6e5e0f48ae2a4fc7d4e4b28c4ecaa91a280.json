{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  props: {\n    chartData: {\n      type: Array,\n      default: () => []\n    },\n    properties: {\n      type: Array,\n      default: () => []\n    }\n  },\n  data() {\n    return {\n      fullData: []\n    };\n  },\n  computed: {\n    chartOptionsList() {\n      if (this.fullData.length === 0) {\n        return [];\n      }\n      return this.getPropertiesSeries();\n    }\n  },\n  watch: {\n    chartData: {\n      handler(newChartData, oldChartData) {\n        if (newChartData !== oldChartData) {\n          this.updateChartData(newChartData);\n        }\n      },\n      deep: true\n    }\n  },\n  created() {\n    this.updateChartData(this.chartData);\n  },\n  methods: {\n    updateChartData(data) {\n      this.fullData = data;\n    },\n    getPropertiesSeries() {\n      const chartOptionsList = this.properties.map(prop => {\n        const propData = this.fullData.reduce((acc, item) => {\n          const {\n            division,\n            service\n          } = item;\n          const key = division.toLowerCase();\n          if (!acc[key]) {\n            acc[key] = {\n              name: division,\n              id: key,\n              data: []\n            };\n          }\n          acc[key].data.push({\n            name: service,\n            y: item[prop]\n          });\n          return acc;\n        }, {});\n        const transformedData = Object.values(propData);\n        const drills = transformedData.map(item => {\n          const aggregatedData = item.data.reduce((result, {\n            name,\n            y\n          }) => {\n            if (!result[name]) {\n              result[name] = 0;\n            }\n            result[name] += y;\n            return result;\n          }, {});\n          const transformedChartData = Object.entries(aggregatedData).map(([name, totalY]) => [name, totalY]);\n          return {\n            name: item.name,\n            id: item.name,\n            data: transformedChartData\n          };\n        });\n        return {\n          chart: {\n            type: \"pie\",\n            backgroundColor: \"#fbfcf8\",\n            spacingTop: 20,\n            spacingBottom: 20,\n            spacingLeft: 20,\n            spacingRight: 20,\n            height: 300\n          },\n          accessibility: {\n            enabled: false\n          },\n          credits: {\n            enabled: false\n          },\n          legend: {\n            enabled: false,\n            itemStyle: {\n              color: \"#ffffff\"\n            }\n          },\n          rangeSelector: {\n            enabled: false\n          },\n          exporting: {\n            enabled: true,\n            buttons: {\n              contextButton: {\n                menuItems: [\"viewFullscreen\", \"printChart\", \"separator\", \"downloadPNG\", \"downloadJPEG\", \"separator\", \"downloadPDF\", \"downloadCSV\"]\n              }\n            }\n          },\n          navigator: {\n            enabled: false\n          },\n          scrollbar: {\n            enabled: false\n          },\n          title: {\n            text: prop.split(\"_\").map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(\" \"),\n            style: {\n              color: \"#000\",\n              fontSize: \"14px\",\n              fontWeight: \"bold\"\n            }\n          },\n          plotOptions: {\n            pie: {\n              colors: [\"#DA70D6\", \"#FFD700\", \"#6B8E23\", \"#FF7F50\", \"#20B2AA\", \"#FF8C00\", \"#483D8B\", \"#2E8B57\", \"#FF69B4\", \"#1E90FF\"],\n              dataLabels: {\n                enabled: true,\n                format: \"<b>{point.name}</b>\",\n                style: {\n                  color: \"#000\"\n                }\n              },\n              tooltip: {\n                pointFormat: \"<b>{point.percentage:.2f}%</b>\"\n              }\n            }\n          },\n          series: [{\n            name: prop.split(\"_\").map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(\" \"),\n            data: Object.values(propData).map(({\n              name,\n              data\n            }) => ({\n              name,\n              y: data.reduce((sum, {\n                y\n              }) => sum + y, 0),\n              drilldown: name\n            }))\n          }],\n          drilldown: {\n            series: drills\n          }\n        };\n      });\n      return chartOptionsList;\n    }\n  }\n};","map":{"version":3,"names":["props","chartData","type","Array","default","properties","data","fullData","computed","chartOptionsList","length","getPropertiesSeries","watch","handler","newChartData","oldChartData","updateChartData","deep","created","methods","map","prop","propData","reduce","acc","item","division","service","key","toLowerCase","name","id","push","y","transformedData","Object","values","drills","aggregatedData","result","transformedChartData","entries","totalY","chart","backgroundColor","spacingTop","spacingBottom","spacingLeft","spacingRight","height","accessibility","enabled","credits","legend","itemStyle","color","rangeSelector","exporting","buttons","contextButton","menuItems","navigator","scrollbar","title","text","split","word","charAt","toUpperCase","slice","join","style","fontSize","fontWeight","plotOptions","pie","colors","dataLabels","format","tooltip","pointFormat","series","sum","drilldown"],"sources":["/Users/rashmee/Desktop/usagm/heatmap/src/components/MainPieChart.vue"],"sourcesContent":["<template>\n  <div>\n    <div\n      v-for=\"(chartOptions, index) in chartOptionsList\"\n      :key=\"index\"\n      class=\"chart-container\"\n    >\n      <highcharts :options=\"chartOptions\" class=\"hc\"></highcharts>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    chartData: {\n      type: Array,\n      default: () => [],\n    },\n    properties: {\n      type: Array,\n      default: () => [],\n    },\n  },\n  data() {\n    return {\n      fullData: [],\n    };\n  },\n  computed: {\n    chartOptionsList() {\n      if (this.fullData.length === 0) {\n        return [];\n      }\n\n      return this.getPropertiesSeries();\n    },\n  },\n  watch: {\n    chartData: {\n      handler(newChartData, oldChartData) {\n        if (newChartData !== oldChartData) {\n          this.updateChartData(newChartData);\n        }\n      },\n      deep: true,\n    },\n  },\n  created() {\n    this.updateChartData(this.chartData);\n  },\n  methods: {\n    updateChartData(data) {\n      this.fullData = data;\n    },\n    getPropertiesSeries() {\n      const chartOptionsList = this.properties.map((prop) => {\n        const propData = this.fullData.reduce((acc, item) => {\n          const { division, service } = item;\n          const key = division.toLowerCase();\n\n          if (!acc[key]) {\n            acc[key] = {\n              name: division,\n              id: key,\n              data: [],\n            };\n          }\n\n          acc[key].data.push({\n            name: service,\n            y: item[prop],\n          });\n\n          return acc;\n        }, {});\n\n        const transformedData = Object.values(propData);\n        const drills = transformedData.map((item) => {\n          const aggregatedData = item.data.reduce((result, { name, y }) => {\n            if (!result[name]) {\n              result[name] = 0;\n            }\n            result[name] += y;\n            return result;\n          }, {});\n\n          const transformedChartData = Object.entries(aggregatedData).map(\n            ([name, totalY]) => [name, totalY]\n          );\n\n          return {\n            name: item.name,\n            id: item.name,\n            data: transformedChartData,\n          };\n        });\n\n        return {\n          chart: {\n            type: \"pie\",\n            backgroundColor: \"#fbfcf8\",\n            spacingTop: 20,\n            spacingBottom: 20,\n            spacingLeft: 20,\n            spacingRight: 20,\n            height: 300,\n          },\n          accessibility: {\n            enabled: false,\n          },\n          credits: {\n            enabled: false,\n          },\n          legend: {\n            enabled: false,\n            itemStyle: {\n              color: \"#ffffff\",\n            },\n          },\n          rangeSelector: {\n            enabled: false,\n          },\n          exporting: {\n            enabled: true,\n            buttons: {\n              contextButton: {\n                menuItems: [\n                  \"viewFullscreen\",\n                  \"printChart\",\n                  \"separator\",\n                  \"downloadPNG\",\n                  \"downloadJPEG\",\n                  \"separator\",\n                  \"downloadPDF\",\n                  \"downloadCSV\",\n                ],\n              },\n            },\n          },\n          navigator: {\n            enabled: false,\n          },\n          scrollbar: {\n            enabled: false,\n          },\n          title: {\n            text: prop\n              .split(\"_\")\n              .map((word) => word.charAt(0).toUpperCase() + word.slice(1))\n              .join(\" \"),\n            style: {\n              color: \"#000\",\n              fontSize: \"14px\",\n              fontWeight: \"bold\",\n            },\n          },\n          plotOptions: {\n            pie: {\n              colors: [\n                \"#DA70D6\",\n                \"#FFD700\",\n                \"#6B8E23\",\n                \"#FF7F50\",\n                \"#20B2AA\",\n                \"#FF8C00\",\n                \"#483D8B\",\n                \"#2E8B57\",\n                \"#FF69B4\",\n                \"#1E90FF\",\n              ],\n              dataLabels: {\n                enabled: true,\n                format: \"<b>{point.name}</b>\",\n                style: {\n                  color: \"#000\",\n                },\n              },\n              tooltip: {\n                pointFormat: \"<b>{point.percentage:.2f}%</b>\",\n              },\n            },\n          },\n          series: [\n            {\n              name: prop\n                .split(\"_\")\n                .map((word) => word.charAt(0).toUpperCase() + word.slice(1))\n                .join(\" \"),\n              data: Object.values(propData).map(({ name, data }) => ({\n                name,\n                y: data.reduce((sum, { y }) => sum + y, 0),\n                drilldown: name,\n              })),\n            },\n          ],\n          drilldown: {\n            series: drills,\n          },\n        };\n      });\n      return chartOptionsList;\n    },\n  },\n};\n</script>\n\n<style>\n.chart-container {\n  width: 50%;\n  float: left;\n  padding: 20px;\n  box-sizing: border-box;\n  background-color: #fbfcf8;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}