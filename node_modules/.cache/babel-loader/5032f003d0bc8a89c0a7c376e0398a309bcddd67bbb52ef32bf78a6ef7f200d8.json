{"ast":null,"code":"import \"ag-grid-community/styles/ag-grid.css\";\nimport \"ag-grid-community/styles/ag-theme-quartz.css\";\nimport { AgGridVue } from \"ag-grid-vue3\";\nexport default {\n  components: {\n    AgGridVue\n  },\n  props: {\n    chartData: {\n      type: Array,\n      default: () => []\n    }\n  },\n  data() {\n    return {\n      colDefs: [],\n      rowData: [],\n      gridApi: null\n    };\n  },\n  watch: {\n    chartData: {\n      handler(newChartData, oldChartData) {\n        if (newChartData !== oldChartData) {\n          this.updateChartData(newChartData);\n        }\n      },\n      deep: true\n    }\n  },\n  mounted() {\n    this.updateChartData(this.chartData);\n  },\n  methods: {\n    onFilterTextBoxChanged() {\n      if (this.gridApi) {\n        const filterText = document.getElementById(\"filter-text-box\").value;\n        this.gridApi.setQuickFilter(filterText);\n      }\n    },\n    onBtnExport() {\n      if (this.gridApi) {\n        this.gridApi.exportDataAsCsv();\n      }\n    },\n    onGridReady(params) {\n      this.gridApi = params.api;\n    },\n    async updateChartData(data) {\n      const aggregatedData = this.aggregateValues(data);\n      this.colDefs = [{\n        headerName: \"Service\",\n        field: \"service\",\n        width: 150\n      }, {\n        headerName: \"Profile Name\",\n        field: \"profile_name\",\n        width: 275\n      }, {\n        headerName: \"Video Views\",\n        field: \"insight_video_views\",\n        sort: \"desc\",\n        valueFormatter: this.addCommas\n      }, {\n        headerName: \"Video Views(30 sec)\",\n        field: \"insight_video_views_30\",\n        valueFormatter: this.addCommas\n      }, {\n        headerName: \"Engagement\",\n        field: \"insight_engagements\",\n        valueFormatter: this.addCommas\n      }, {\n        headerName: \"Reactions\",\n        field: \"reactions\",\n        valueFormatter: this.addCommas\n      }, {\n        headerName: \"Comments\",\n        field: \"comments\",\n        valueFormatter: this.addCommas\n      }, {\n        headerName: \"Shares\",\n        field: \"shares\",\n        valueFormatter: this.addCommas\n      }, {\n        headerName: \"Change in Followers\",\n        field: \"fans_change\",\n        valueFormatter: this.addCommas\n      }];\n      this.rowData = aggregatedData;\n    },\n    addCommas(params) {\n      if (params.value !== undefined && params.value !== null) {\n        return params.value.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n      } else {\n        return params.value;\n      }\n    },\n    aggregateValues(data) {\n      const aggregatedRows = Object.values(data.reduce((aggregatedMap, item) => {\n        const key = `${item.service}-${item.profile_name}`;\n        if (!aggregatedMap[key]) {\n          aggregatedMap[key] = {\n            service: item.service,\n            profile_name: item.profile_name,\n            insight_video_views: 0,\n            insight_video_views_30: 0,\n            insight_engagements: 0,\n            reactions: 0,\n            comments: 0,\n            shares: 0,\n            fans_change: 0\n          };\n        }\n        aggregatedMap[key].insight_video_views += item.insight_video_views;\n        aggregatedMap[key].insight_video_views_30 += item.insight_video_views_30;\n        aggregatedMap[key].insight_engagements += item.insight_engagements;\n        aggregatedMap[key].reactions += item.reactions;\n        aggregatedMap[key].comments += item.comments;\n        aggregatedMap[key].shares += item.shares;\n        aggregatedMap[key].fans_change += item.fans_change;\n        return aggregatedMap;\n      }, {}));\n      return aggregatedRows;\n    },\n    websiteUrlRenderer(params) {\n      const url = params.value;\n      if (url) {\n        return `<a href=\"${url}\" target=\"_blank\">${url}</a>`;\n      } else {\n        return \"\";\n      }\n    }\n  }\n};","map":{"version":3,"names":["AgGridVue","components","props","chartData","type","Array","default","data","colDefs","rowData","gridApi","watch","handler","newChartData","oldChartData","updateChartData","deep","mounted","methods","onFilterTextBoxChanged","filterText","document","getElementById","value","setQuickFilter","onBtnExport","exportDataAsCsv","onGridReady","params","api","aggregatedData","aggregateValues","headerName","field","width","sort","valueFormatter","addCommas","undefined","toString","replace","aggregatedRows","Object","values","reduce","aggregatedMap","item","key","service","profile_name","insight_video_views","insight_video_views_30","insight_engagements","reactions","comments","shares","fans_change","websiteUrlRenderer","url"],"sources":["/Users/rashmee/Desktop/usagm/heatmap/src/components/FacebookTab/AgGridVue.vue"],"sourcesContent":["<template>\n  <div class=\"data-table-container\">\n    <div class=\"d-flex justify-content-between\">\n      <input\n        type=\"text\"\n        class=\"mt-2 w-25 form-control-sm\"\n        id=\"filter-text-box\"\n        placeholder=\"Filter...\"\n        v-on:input=\"onFilterTextBoxChanged\"\n      />\n      <button class=\"btn btn-link\" v-on:click=\"onBtnExport\">\n        <font-awesome-icon icon=\"file-csv\" />\n      </button>\n    </div>\n\n    <ag-grid-vue\n      :rowData=\"rowData\"\n      :columnDefs=\"colDefs\"\n      style=\"width: 100%; height: 750px\"\n      class=\"ag-theme-quartz\"\n      :pagination=\"true\"\n      @grid-ready=\"onGridReady\"\n    />\n  </div>\n</template>\n\n<script>\nimport \"ag-grid-community/styles/ag-grid.css\";\nimport \"ag-grid-community/styles/ag-theme-quartz.css\";\nimport { AgGridVue } from \"ag-grid-vue3\";\n\nexport default {\n  components: {\n    AgGridVue,\n  },\n  props: {\n    chartData: {\n      type: Array,\n      default: () => [],\n    },\n  },\n  data() {\n    return {\n      colDefs: [],\n      rowData: [],\n      gridApi: null,\n    };\n  },\n  watch: {\n    chartData: {\n      handler(newChartData, oldChartData) {\n        if (newChartData !== oldChartData) {\n          this.updateChartData(newChartData);\n        }\n      },\n      deep: true,\n    },\n  },\n  mounted() {\n    this.updateChartData(this.chartData);\n  },\n  methods: {\n    onFilterTextBoxChanged() {\n      if (this.gridApi) {\n        const filterText = document.getElementById(\"filter-text-box\").value;\n        this.gridApi.setQuickFilter(filterText);\n      }\n    },\n    onBtnExport() {\n      if (this.gridApi) {\n        this.gridApi.exportDataAsCsv();\n      }\n    },\n    onGridReady(params) {\n      this.gridApi = params.api;\n    },\n    async updateChartData(data) {\n      const aggregatedData = this.aggregateValues(data);\n\n      this.colDefs = [\n        { headerName: \"Service\", field: \"service\", width: 150 },\n        {\n          headerName: \"Profile Name\",\n          field: \"profile_name\",\n          width: 275,\n        },\n        {\n          headerName: \"Video Views\",\n          field: \"insight_video_views\",\n          sort: \"desc\",\n          valueFormatter: this.addCommas,\n        },\n        {\n          headerName: \"Video Views(30 sec)\",\n          field: \"insight_video_views_30\",\n          valueFormatter: this.addCommas,\n        },\n        {\n          headerName: \"Engagement\",\n          field: \"insight_engagements\",\n          valueFormatter: this.addCommas,\n        },\n        {\n          headerName: \"Reactions\",\n          field: \"reactions\",\n          valueFormatter: this.addCommas,\n        },\n        {\n          headerName: \"Comments\",\n          field: \"comments\",\n          valueFormatter: this.addCommas,\n        },\n        {\n          headerName: \"Shares\",\n          field: \"shares\",\n          valueFormatter: this.addCommas,\n        },\n        {\n          headerName: \"Change in Followers\",\n          field: \"fans_change\",\n          valueFormatter: this.addCommas,\n        },\n      ];\n      this.rowData = aggregatedData;\n    },\n    addCommas(params) {\n      if (params.value !== undefined && params.value !== null) {\n        return params.value.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n      } else {\n        return params.value;\n      }\n    },\n    aggregateValues(data) {\n      const aggregatedRows = Object.values(\n        data.reduce((aggregatedMap, item) => {\n          const key = `${item.service}-${item.profile_name}`;\n          if (!aggregatedMap[key]) {\n            aggregatedMap[key] = {\n              service: item.service,\n              profile_name: item.profile_name,\n              insight_video_views: 0,\n              insight_video_views_30: 0,\n              insight_engagements: 0,\n              reactions: 0,\n              comments: 0,\n              shares: 0,\n              fans_change: 0,\n            };\n          }\n          aggregatedMap[key].insight_video_views += item.insight_video_views;\n          aggregatedMap[key].insight_video_views_30 +=\n            item.insight_video_views_30;\n          aggregatedMap[key].insight_engagements += item.insight_engagements;\n          aggregatedMap[key].reactions += item.reactions;\n          aggregatedMap[key].comments += item.comments;\n          aggregatedMap[key].shares += item.shares;\n          aggregatedMap[key].fans_change += item.fans_change;\n\n          return aggregatedMap;\n        }, {})\n      );\n\n      return aggregatedRows;\n    },\n    websiteUrlRenderer(params) {\n      const url = params.value;\n      if (url) {\n        return `<a href=\"${url}\" target=\"_blank\">${url}</a>`;\n      } else {\n        return \"\";\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n/* Add scoped styles if needed */\n</style>\n"],"mappings":"AA2BA,OAAO,sCAAsC;AAC7C,OAAO,8CAA8C;AACrD,SAASA,SAAQ,QAAS,cAAc;AAExC,eAAe;EACbC,UAAU,EAAE;IACVD;EACF,CAAC;EACDE,KAAK,EAAE;IACLC,SAAS,EAAE;MACTC,IAAI,EAAEC,KAAK;MACXC,OAAO,EAAEA,CAAA,KAAM;IACjB;EACF,CAAC;EACDC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,OAAO,EAAE,EAAE;MACXC,OAAO,EAAE,EAAE;MACXC,OAAO,EAAE;IACX,CAAC;EACH,CAAC;EACDC,KAAK,EAAE;IACLR,SAAS,EAAE;MACTS,OAAOA,CAACC,YAAY,EAAEC,YAAY,EAAE;QAClC,IAAID,YAAW,KAAMC,YAAY,EAAE;UACjC,IAAI,CAACC,eAAe,CAACF,YAAY,CAAC;QACpC;MACF,CAAC;MACDG,IAAI,EAAE;IACR;EACF,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACF,eAAe,CAAC,IAAI,CAACZ,SAAS,CAAC;EACtC,CAAC;EACDe,OAAO,EAAE;IACPC,sBAAsBA,CAAA,EAAG;MACvB,IAAI,IAAI,CAACT,OAAO,EAAE;QAChB,MAAMU,UAAS,GAAIC,QAAQ,CAACC,cAAc,CAAC,iBAAiB,CAAC,CAACC,KAAK;QACnE,IAAI,CAACb,OAAO,CAACc,cAAc,CAACJ,UAAU,CAAC;MACzC;IACF,CAAC;IACDK,WAAWA,CAAA,EAAG;MACZ,IAAI,IAAI,CAACf,OAAO,EAAE;QAChB,IAAI,CAACA,OAAO,CAACgB,eAAe,CAAC,CAAC;MAChC;IACF,CAAC;IACDC,WAAWA,CAACC,MAAM,EAAE;MAClB,IAAI,CAAClB,OAAM,GAAIkB,MAAM,CAACC,GAAG;IAC3B,CAAC;IACD,MAAMd,eAAeA,CAACR,IAAI,EAAE;MAC1B,MAAMuB,cAAa,GAAI,IAAI,CAACC,eAAe,CAACxB,IAAI,CAAC;MAEjD,IAAI,CAACC,OAAM,GAAI,CACb;QAAEwB,UAAU,EAAE,SAAS;QAAEC,KAAK,EAAE,SAAS;QAAEC,KAAK,EAAE;MAAI,CAAC,EACvD;QACEF,UAAU,EAAE,cAAc;QAC1BC,KAAK,EAAE,cAAc;QACrBC,KAAK,EAAE;MACT,CAAC,EACD;QACEF,UAAU,EAAE,aAAa;QACzBC,KAAK,EAAE,qBAAqB;QAC5BE,IAAI,EAAE,MAAM;QACZC,cAAc,EAAE,IAAI,CAACC;MACvB,CAAC,EACD;QACEL,UAAU,EAAE,qBAAqB;QACjCC,KAAK,EAAE,wBAAwB;QAC/BG,cAAc,EAAE,IAAI,CAACC;MACvB,CAAC,EACD;QACEL,UAAU,EAAE,YAAY;QACxBC,KAAK,EAAE,qBAAqB;QAC5BG,cAAc,EAAE,IAAI,CAACC;MACvB,CAAC,EACD;QACEL,UAAU,EAAE,WAAW;QACvBC,KAAK,EAAE,WAAW;QAClBG,cAAc,EAAE,IAAI,CAACC;MACvB,CAAC,EACD;QACEL,UAAU,EAAE,UAAU;QACtBC,KAAK,EAAE,UAAU;QACjBG,cAAc,EAAE,IAAI,CAACC;MACvB,CAAC,EACD;QACEL,UAAU,EAAE,QAAQ;QACpBC,KAAK,EAAE,QAAQ;QACfG,cAAc,EAAE,IAAI,CAACC;MACvB,CAAC,EACD;QACEL,UAAU,EAAE,qBAAqB;QACjCC,KAAK,EAAE,aAAa;QACpBG,cAAc,EAAE,IAAI,CAACC;MACvB,CAAC,CACF;MACD,IAAI,CAAC5B,OAAM,GAAIqB,cAAc;IAC/B,CAAC;IACDO,SAASA,CAACT,MAAM,EAAE;MAChB,IAAIA,MAAM,CAACL,KAAI,KAAMe,SAAQ,IAAKV,MAAM,CAACL,KAAI,KAAM,IAAI,EAAE;QACvD,OAAOK,MAAM,CAACL,KAAK,CAACgB,QAAQ,CAAC,CAAC,CAACC,OAAO,CAAC,uBAAuB,EAAE,GAAG,CAAC;MACtE,OAAO;QACL,OAAOZ,MAAM,CAACL,KAAK;MACrB;IACF,CAAC;IACDQ,eAAeA,CAACxB,IAAI,EAAE;MACpB,MAAMkC,cAAa,GAAIC,MAAM,CAACC,MAAM,CAClCpC,IAAI,CAACqC,MAAM,CAAC,CAACC,aAAa,EAAEC,IAAI,KAAK;QACnC,MAAMC,GAAE,GAAI,GAAGD,IAAI,CAACE,OAAO,IAAIF,IAAI,CAACG,YAAY,EAAE;QAClD,IAAI,CAACJ,aAAa,CAACE,GAAG,CAAC,EAAE;UACvBF,aAAa,CAACE,GAAG,IAAI;YACnBC,OAAO,EAAEF,IAAI,CAACE,OAAO;YACrBC,YAAY,EAAEH,IAAI,CAACG,YAAY;YAC/BC,mBAAmB,EAAE,CAAC;YACtBC,sBAAsB,EAAE,CAAC;YACzBC,mBAAmB,EAAE,CAAC;YACtBC,SAAS,EAAE,CAAC;YACZC,QAAQ,EAAE,CAAC;YACXC,MAAM,EAAE,CAAC;YACTC,WAAW,EAAE;UACf,CAAC;QACH;QACAX,aAAa,CAACE,GAAG,CAAC,CAACG,mBAAkB,IAAKJ,IAAI,CAACI,mBAAmB;QAClEL,aAAa,CAACE,GAAG,CAAC,CAACI,sBAAqB,IACtCL,IAAI,CAACK,sBAAsB;QAC7BN,aAAa,CAACE,GAAG,CAAC,CAACK,mBAAkB,IAAKN,IAAI,CAACM,mBAAmB;QAClEP,aAAa,CAACE,GAAG,CAAC,CAACM,SAAQ,IAAKP,IAAI,CAACO,SAAS;QAC9CR,aAAa,CAACE,GAAG,CAAC,CAACO,QAAO,IAAKR,IAAI,CAACQ,QAAQ;QAC5CT,aAAa,CAACE,GAAG,CAAC,CAACQ,MAAK,IAAKT,IAAI,CAACS,MAAM;QACxCV,aAAa,CAACE,GAAG,CAAC,CAACS,WAAU,IAAKV,IAAI,CAACU,WAAW;QAElD,OAAOX,aAAa;MACtB,CAAC,EAAE,CAAC,CAAC,CACP,CAAC;MAED,OAAOJ,cAAc;IACvB,CAAC;IACDgB,kBAAkBA,CAAC7B,MAAM,EAAE;MACzB,MAAM8B,GAAE,GAAI9B,MAAM,CAACL,KAAK;MACxB,IAAImC,GAAG,EAAE;QACP,OAAO,YAAYA,GAAG,qBAAqBA,GAAG,MAAM;MACtD,OAAO;QACL,OAAO,EAAE;MACX;IACF;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}