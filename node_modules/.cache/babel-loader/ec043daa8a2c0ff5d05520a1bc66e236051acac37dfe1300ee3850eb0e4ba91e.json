{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-3f527e7a\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"data-table-container\"\n};\nconst _hoisted_2 = {\n  class: \"d-flex justify-content-between\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_font_awesome_icon = _resolveComponent(\"font-awesome-icon\");\n  const _component_ag_grid_vue = _resolveComponent(\"ag-grid-vue\", true);\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"mt-2 w-25 form-control-sm\",\n    id: \"filter-text-box\",\n    placeholder: \"Filter...\",\n    onInput: _cache[0] || (_cache[0] = (...args) => $options.onFilterTextBoxChanged && $options.onFilterTextBoxChanged(...args))\n  }, null, 32 /* NEED_HYDRATION */), _createElementVNode(\"button\", {\n    class: \"btn btn-link\",\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.onBtnExport && $options.onBtnExport(...args))\n  }, [_createVNode(_component_font_awesome_icon, {\n    icon: \"file-csv\"\n  })])]), _createVNode(_component_ag_grid_vue, {\n    rowData: $data.rowData,\n    columnDefs: $data.colDefs,\n    style: {\n      \"width\": \"100%\",\n      \"height\": \"750px\"\n    },\n    class: \"ag-theme-quartz\",\n    pagination: true,\n    onGridReady: $options.onGridReady\n  }, null, 8 /* PROPS */, [\"rowData\", \"columnDefs\", \"onGridReady\"])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","type","id","placeholder","onInput","_cache","args","$options","onFilterTextBoxChanged","onClick","onBtnExport","_createVNode","_component_font_awesome_icon","icon","_component_ag_grid_vue","rowData","$data","columnDefs","colDefs","style","pagination","onGridReady"],"sources":["/Users/rashmee/Desktop/usagm/heatmap/src/components/CountryTab/AgGridVue.vue"],"sourcesContent":["<template>\n  <div class=\"data-table-container\">\n    <div class=\"d-flex justify-content-between\">\n      <input\n        type=\"text\"\n        class=\"mt-2 w-25 form-control-sm\"\n        id=\"filter-text-box\"\n        placeholder=\"Filter...\"\n        v-on:input=\"onFilterTextBoxChanged\"\n      />\n      <button class=\"btn btn-link\" v-on:click=\"onBtnExport\">\n        <font-awesome-icon icon=\"file-csv\" />\n      </button>\n    </div>\n\n    <ag-grid-vue\n      :rowData=\"rowData\"\n      :columnDefs=\"colDefs\"\n      style=\"width: 100%; height: 750px\"\n      class=\"ag-theme-quartz\"\n      :pagination=\"true\"\n      @grid-ready=\"onGridReady\"\n    />\n  </div>\n</template>\n\n<script>\nimport \"ag-grid-community/styles/ag-grid.css\";\nimport \"ag-grid-community/styles/ag-theme-quartz.css\";\nimport { AgGridVue } from \"ag-grid-vue3\";\n\nexport default {\n  components: {\n    AgGridVue,\n  },\n  props: {\n    chartData: {\n      type: Array,\n      default: () => [],\n    },\n  },\n  data() {\n    return {\n      colDefs: [],\n      rowData: [],\n      gridApi: null,\n    };\n  },\n  watch: {\n    chartData: {\n      handler(newChartData, oldChartData) {\n        if (newChartData !== oldChartData) {\n          this.updateChartData(newChartData);\n        }\n      },\n      deep: true,\n    },\n  },\n  mounted() {\n    this.updateChartData(this.chartData);\n  },\n  methods: {\n    onFilterTextBoxChanged() {\n      if (this.gridApi) {\n        const filterText = document.getElementById(\"filter-text-box\").value;\n        this.gridApi.setQuickFilter(filterText);\n      }\n    },\n    onBtnExport() {\n      if (this.gridApi) {\n        this.gridApi.exportDataAsCsv();\n      }\n    },\n    onGridReady(params) {\n      this.gridApi = params.api;\n    },\n    async updateChartData(data) {\n      const aggregatedData = this.aggregateValues(data);\n\n      this.colDefs = [\n        { headerName: \"Country\", field: \"country\", width: 350 },\n        {\n          headerName: \"Visits\",\n          field: \"visits\",\n          sort: \"desc\",\n          valueFormatter: this.addCommas,\n        },\n        {\n          headerName: \"Article Views\",\n          field: \"article_views\",\n          valueFormatter: this.addCommas,\n        },\n        {\n          headerName: \"Video Plays\",\n          field: \"video_play\",\n          valueFormatter: this.addCommas,\n        },\n        {\n          headerName: \"Audio Plays\",\n          field: \"audio_play\",\n          valueFormatter: this.addCommas,\n        },\n      ];\n      this.rowData = aggregatedData;\n    },\n    addCommas(params) {\n      if (params.value !== undefined && params.value !== null) {\n        return params.value.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n      } else {\n        return params.value;\n      }\n    },\n    aggregateValues(data) {\n      const aggregatedRows = Object.values(\n        data.reduce((aggregatedMap, item) => {\n          const key = `${item.country}`;\n          if (!aggregatedMap[key]) {\n            aggregatedMap[key] = {\n              country: item.country,\n              visits: 0,\n              article_views: 0,\n              video_play: 0,\n              audio_play: 0,\n            };\n          }\n          aggregatedMap[key].visits += item.visits;\n          aggregatedMap[key].article_views += item.article_views;\n          aggregatedMap[key].video_play += item.video_play;\n          aggregatedMap[key].audio_play += item.audio_play;\n\n          return aggregatedMap;\n        }, {})\n      );\n\n      return aggregatedRows;\n    },\n    websiteUrlRenderer(params) {\n      const url = params.value;\n      if (url) {\n        return `<a href=\"${url}\" target=\"_blank\">${url}</a>`;\n      } else {\n        return \"\";\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n/* Add scoped styles if needed */\n</style>\n"],"mappings":";;;EACOA,KAAK,EAAC;AAAsB;;EAC1BA,KAAK,EAAC;AAAgC;;;;uBAD7CC,mBAAA,CAsBM,OAtBNC,UAsBM,GArBJC,mBAAA,CAWM,OAXNC,UAWM,GAVJD,mBAAA,CAME;IALAE,IAAI,EAAC,MAAM;IACXL,KAAK,EAAC,2BAA2B;IACjCM,EAAE,EAAC,iBAAiB;IACpBC,WAAW,EAAC,WAAW;IAClBC,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAC,sBAAA,IAAAD,QAAA,CAAAC,sBAAA,IAAAF,IAAA,CAAsB;qCAEpCP,mBAAA,CAES;IAFDH,KAAK,EAAC,cAAc;IAAMa,OAAK,EAAAJ,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAG,WAAA,IAAAH,QAAA,CAAAG,WAAA,IAAAJ,IAAA,CAAW;MAClDK,YAAA,CAAqCC,4BAAA;IAAlBC,IAAI,EAAC;EAAU,G,KAItCF,YAAA,CAOEG,sBAAA;IANCC,OAAO,EAAEC,KAAA,CAAAD,OAAO;IAChBE,UAAU,EAAED,KAAA,CAAAE,OAAO;IACpBC,KAAkC,EAAlC;MAAA;MAAA;IAAA,CAAkC;IAClCvB,KAAK,EAAC,iBAAiB;IACtBwB,UAAU,EAAE,IAAI;IAChBC,WAAU,EAAEd,QAAA,CAAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}